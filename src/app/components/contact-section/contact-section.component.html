<section>
    <div class="contact">
        <div class="contact-wrapper">
            <h2 id="contact">Say Hi!</h2>
            <div data-aos="zoom-in" class="contact-form">
                <p>Want to discuss a new project?</p>
                <p>Say hello! Let's discuss your ideas and make it happen!</p>
                <form [formGroup]="contactForm" (ngSubmit)="sendEmail()">
                    <div data-aos="fade-left" class="floating-label-group">
                        <input type="text" id="name" formControlName="name" />
                        <label class="floating-label">Your name</label>
                        <span
                            class="hidden"
                            [ngClass]="{
                                visable:
                                    contactForm
                                        .get('name')
                                        ?.hasError('required') &&
                                    (contactForm.get('name')?.dirty ||
                                        contactForm.get('name')?.touched)
                            }"
                            >Your name is required</span
                        >
                        <img
                            class="hidden"
                            [ngClass]="{
                                visable:
                                    contactForm
                                        .get('name')
                                        ?.hasError('required') &&
                                    (contactForm.get('name')?.dirty ||
                                        contactForm.get('name')?.touched)
                            }"
                            src="assets/img/red_exclamation.svg"
                        />
                        <img
                            class="hidden"
                            [ngClass]="{
                                visable: isSubmitted
                            }"
                            src="assets/img/green_check.svg"
                        />
                    </div>
                    <div data-aos="fade-right" class="floating-label-group">
                        <input type="text" id="email" formControlName="email" />
                        <label class="floating-label">Your email</label>
                        <span
                            [ngClass]="{
                                visable:
                                    contactForm
                                        .get('email')
                                        ?.hasError('email') ||
                                    (contactForm
                                        .get('email')
                                        ?.hasError('required') &&
                                        (contactForm.get('email')?.dirty ||
                                            contactForm.get('email')?.touched))
                            }"
                            class="hidden"
                            >Your email is required</span
                        >
                        <img
                            [ngClass]="{
                                visable:
                                    contactForm
                                        .get('email')
                                        ?.hasError('required') &&
                                    (contactForm.get('email').dirty ||
                                        contactForm.get('email').touched)
                            }"
                            class="hidden"
                            src="assets/img/red_exclamation.svg"
                        />
                        <img
                            class="hidden"
                            [ngClass]="{
                                visable: isSubmitted
                            }"
                            src="assets/img/green_check.svg"
                        />
                    </div>
                    <div data-aos="fade-left" class="floating-label-group">
                        <textarea
                            type="text"
                            id="message"
                            style="height: 200px"
                            autocomplete="off"
                            formControlName="message"
                        ></textarea>
                        <label class="floating-label">Your message</label>
                        <span
                            [ngClass]="{
                                visable:
                                    contactForm
                                        .get('message')
                                        ?.hasError('minlength') ||
                                    (contactForm
                                        .get('message')
                                        ?.hasError('required') &&
                                        (contactForm.get('message').dirty ||
                                            contactForm.get('message').touched))
                            }"
                            class="hidden"
                            >Your message needs min.
                            {{ this.minLength }} characters.
                        </span>
                        <img
                            [ngClass]="{
                                visable:
                                    contactForm
                                        .get('message')
                                        ?.hasError('required') &&
                                    (contactForm.get('message').dirty ||
                                        contactForm.get('message').touched)
                            }"
                            class="hidden"
                            src="assets/img/red_exclamation.svg"
                        />
                        <img
                            class="hidden"
                            [ngClass]="{
                                visable: isSubmitted
                            }"
                            src="assets/img/green_check.svg"
                        />
                    </div>
                    <button
                        [disabled]="contactForm.invalid"
                        type="submit"
                        #sendButton
                        class="button"
                    >
                        Send message
                    </button>
                </form>

                <div
                    data-aos="fade-up"
                    *ngIf="isSubmitted && (emailSent || emailNotSent)"
                    class="contact-popup"
                >
                    <span *ngIf="emailSent">Email successfully sent.</span>
                    <span *ngIf="emailNotSent"
                        >Email not sent. Please try again later.</span
                    >
                </div>
            </div>
        </div>
    </div>
</section>
